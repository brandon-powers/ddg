#!/usr/bin/env bash

set -o nounset
set -o errexit
set -o pipefail

IFS=$'\n\t'

sudo apt-get install gcc
sudo apt-get install make
sudo apt-get install -y libssl-dev libreadline-dev zlib1g-dev

# This is required if you want to generate visualizations.
sudo apt-get install graphviz

# This installs the machine requirements to
# interact with these data stores.
sudo apt-get install postgresql postgresql-contrib postgresql-client
sudo apt-get install libpq-dev
sudo apt-get install mysql-server
sudo apt-get install libmysqlclient-dev

curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash

echo 'eval "$(rbenv init -)"' >> ~/.bashrc
echo 'export PATH=$PATH:~/.rbenv/bin' >> ~/.bashrc
. ~/.bashrc

rbenv install 2.3.3
curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash

# rbenv-vars plugin
git clone https://github.com/rbenv/rbenv-vars.git $(rbenv root)/plugins/rbenv-vars

gem install bundler
bundle install
